module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-localize-redux")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("prop-types")},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("react-leaflet-universal")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("redux-thunk")},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}r.r(t);var i=r(10),a=r.n(i),s=r(7),l=r.n(s),u=r(11),c=r.n(u),m=r(12),d=r.n(m),f=r(13),_=r.n(f),p=r(0),h=r.n(p),b=r(9),g=r.n(b),N=r(5),y=r(2),E=r(1),v=r(6),O=r(4);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=r(3),S=r.n(w),k=r(8),R="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\maps\\BackgroundMap.js",P=function(e){var t=e.position,r=e.currentPosition,n=e.zoom,o=e.viewportChanged,i=e.history,a=t.latitude,s=t.longitude,l=r.latitude,u=r.longitude;return h.a.createElement("div",{id:"maps",__source:{fileName:R,lineNumber:28},__self:this},h.a.createElement(k.Map,{center:[a,s],zoom:n,maxZoom:10,attributionControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,zoomControl:!1,dragging:!0,animate:!0,easeLinearity:.35,style:{width:"100%",height:"100%"},onViewportChanged:function(e){var t=j(e.center,2),n=t[0],a=t[1];(r.latitude&&r.latitude!==n||r.longitude&&r.longitude!==a)&&i.push("/".concat(n,"/").concat(a)),o(e)},__source:{fileName:R,lineNumber:29},__self:this},h.a.createElement(k.TileLayer,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',__source:{fileName:R,lineNumber:43},__self:this}),null!==l&&null!==u&&h.a.createElement(k.Marker,{position:[l,u],__source:{fileName:R,lineNumber:48},__self:this},h.a.createElement(k.Popup,{__source:{fileName:R,lineNumber:49},__self:this},h.a.createElement(E.Translate,{id:"maps.markerPosition",__source:{fileName:R,lineNumber:49},__self:this})))))};P.propTypes={position:S.a.objectOf.isRequired,currentPosition:S.a.objectOf.isRequired,zoom:S.a.objectOf.isRequired,viewportChanged:S.a.func.isRequired,history:S.a.objectOf.isRequired};var M=Object(E.withLocalize)(Object(O.withRouter)(P)),x="HOME_USERNAME_CHANGED",C="HOME_PASSWORD_CHANGED",D="HOME_SIGN_IN",T="HOME_SIGN_OUT",A="HOME_REMEMBER_ME_CHANGED",q="HOME_PASSWORD_RECOVERY_NEEDED",I="HOME_PASSWORD_RECOVERY_SENT",z="MAP_USER_POSITION_CHANGE_STARTED",H="MAP_USER_POSITION_CHANGE_FINISHED",L="MAP_USER_POSITION_CHANGE_ERROR",G="MAP_VIEWPORT_CHANGED";function W(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e&&t?7:-1,n=new Date;n.setDate(n.getDate()+r),document.cookie="username=".concat(e,"; expires=").concat(n.toUTCString())}function B(){return{en:{latitude:40.73061,longitude:-73.935242},de:{latitude:52.520008,longitude:13.404954},ru:{latitude:55.751244,longitude:37.618423}}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en"]}var U=Object(O.withRouter)(function(){var e=Object(p.useRef)(),t=Object(y.useSelector)(function(e){return e.maps},y.shallowEqual),r=Object(y.useDispatch)(),n=Object(p.useCallback)(function(e){var t=j(e.center,2),n=t[0],o=t[1],i=e.zoom;r({type:G,payload:{position:{latitude:n,longitude:o},zoom:i}})},[r]),o=t.position,i=t.currentPosition,a=t.zoom;return Object(p.useEffect)(function(){process.env.BROWSER&&(r({type:z,payload:!0}),setTimeout(function(){var e;(e={enableHighAccuracy:!1,timeout:5e3,maximumAge:0},process.env.BROWSER?new Promise(function(t,r){return window.navigator.geolocation.getCurrentPosition(t,r,e)}):{coords:{latitude:null,longitude:null}}).then(function(e){var t=e.coords,n=t.latitude,o=t.longitude;r({type:H,payload:{isSet:!0,latitude:n,longitude:o}})}).catch(function(e){r({type:L,payload:e})})},1500))},[e,r]),h.a.createElement(M,{position:o,currentPosition:i,zoom:a,viewportChanged:n,__source:{fileName:"D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\containers\\maps\\MapContainer.js",lineNumber:64},__self:this})}),F="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\home\\LabeledInput.js";function V(e){var t=e.id,r=e.value,n=e.handler,o=e.pass,i=void 0!==o&&o?"password":"text";return h.a.createElement("div",{className:"labeled-input",__source:{fileName:F,lineNumber:10},__self:this},"password"===i?h.a.createElement(E.Translate,{id:"login.password",__source:{fileName:F,lineNumber:11},__self:this}):h.a.createElement(E.Translate,{id:"login.email",__source:{fileName:F,lineNumber:11},__self:this}),h.a.createElement("input",{id:t,type:i,value:r,onChange:n,__source:{fileName:F,lineNumber:12},__self:this}))}V.propTypes={id:S.a.string.isRequired,value:S.a.string.isRequired,handler:S.a.func.isRequired,pass:S.a.bool},V.defaultProps={pass:!1};var Y=Object(E.withLocalize)(V),Z="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\home\\HomeRecovery.js",J=Object(E.withLocalize)(function(){var e=Object(y.useSelector)(function(e){return e.home.username}),t=Object(y.useDispatch)(),r=Object(p.useCallback)(function(e){var r=e.target.value;t({type:x,payload:r})},[t]),n=Object(p.useCallback)(function(){t({type:I,payload:!1})},[t]);return h.a.createElement("div",{id:"home-component-recovery",__source:{fileName:Z,lineNumber:21},__self:this},h.a.createElement("h1",{__source:{fileName:Z,lineNumber:22},__self:this},h.a.createElement(E.Translate,{id:"recovery.header",__source:{fileName:Z,lineNumber:22},__self:this})),h.a.createElement(Y,{handler:r,id:"username",value:e,__source:{fileName:Z,lineNumber:23},__self:this}),h.a.createElement("p",{__source:{fileName:Z,lineNumber:24},__self:this},h.a.createElement(E.Translate,{id:"recovery.help",__source:{fileName:Z,lineNumber:24},__self:this})),h.a.createElement("div",{className:"login-buttons",__source:{fileName:Z,lineNumber:25},__self:this},h.a.createElement("button",{id:"send-request",className:"sign-in-button",type:"button",onClick:n,__source:{fileName:Z,lineNumber:26},__self:this},h.a.createElement(E.Translate,{id:"recovery.sendRequest",__source:{fileName:Z,lineNumber:32},__self:this}))))}),K="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\home\\HomeLoginRememberControl.js",Q=Object(E.withLocalize)(function(){var e=Object(y.useSelector)(function(e){return e.home.rememberMe}),t=Object(y.useDispatch)();return h.a.createElement("div",{__source:{fileName:K,lineNumber:15},__self:this},h.a.createElement("label",{id:"remember-me-label",htmlFor:"remember-me",__source:{fileName:K,lineNumber:16},__self:this},h.a.createElement("input",{id:"remember-me",type:"checkbox",checked:e,onClick:function(e){t({type:A,payload:e.target.checked})},__source:{fileName:K,lineNumber:17},__self:this}),h.a.createElement(E.Translate,{id:"login.rememberMe",__source:{fileName:K,lineNumber:18},__self:this})))}),X="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\home\\HomeLoginButtons.js",$=Object(E.withLocalize)(function(){var e=Object(y.useSelector)(function(e){return e.home.loggedIn}),t=Object(y.useDispatch)(),r=Object(p.useCallback)(function(){t({type:q,payload:!0})},[t]);return h.a.createElement("div",{className:"login-buttons",__source:{fileName:X,lineNumber:23},__self:this},h.a.createElement("button",{id:"sign-in",className:"sign-in-button",type:"button",onClick:e?function(){t({type:T,payload:!1})}:function(){t({type:D,payload:!0})},__source:{fileName:X,lineNumber:24},__self:this},e?h.a.createElement(E.Translate,{id:"login.signOut",__source:{fileName:X,lineNumber:30},__self:this}):h.a.createElement(E.Translate,{id:"login.signIn",__source:{fileName:X,lineNumber:30},__self:this})),h.a.createElement("button",{id:"recovery",className:"link-button",type:"button",onClick:r,__source:{fileName:X,lineNumber:32},__self:this},h.a.createElement(E.Translate,{id:"login.forgotPass",__source:{fileName:X,lineNumber:38},__self:this})))}),ee="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\components\\home\\HomeLogin.js",te=Object(E.withLocalize)(function(){var e=Object(y.useSelector)(function(e){return e.home.username}),t=Object(y.useSelector)(function(e){return e.home.password}),r=Object(y.useDispatch)(),n=Object(p.useCallback)(function(e){var t=e.target.value;r({type:x,payload:t})},[r]),o=Object(p.useCallback)(function(e){var t=e.target.value;r({type:C,payload:t})},[r]);return h.a.createElement("div",{id:"home-component-login",__source:{fileName:ee,lineNumber:26},__self:this},h.a.createElement("h1",{__source:{fileName:ee,lineNumber:27},__self:this},h.a.createElement(E.Translate,{id:"login.header",__source:{fileName:ee,lineNumber:27},__self:this})),h.a.createElement(Y,{handler:n,id:"username",value:e,__source:{fileName:ee,lineNumber:28},__self:this}),h.a.createElement(Y,{handler:o,id:"password",value:t,pass:!0,__source:{fileName:ee,lineNumber:29},__self:this}),h.a.createElement(Q,{__source:{fileName:ee,lineNumber:30},__self:this}),h.a.createElement($,{__source:{fileName:ee,lineNumber:31},__self:this}))}),re="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\containers\\home\\HomeContainer.js",ne=Object(O.withRouter)(function(){var e=Object(y.useSelector)(function(e){return e.home.recovery});return h.a.createElement("div",{id:"home-container",__source:{fileName:re,lineNumber:17},__self:this},h.a.createElement(U,{__source:{fileName:re,lineNumber:18},__self:this}),h.a.createElement("section",{id:"home-component",__source:{fileName:re,lineNumber:19},__self:this},function(){return e?h.a.createElement(J,{__source:{fileName:re,lineNumber:12},__self:this}):h.a.createElement(te,{__source:{fileName:re,lineNumber:13},__self:this})}()))}),oe="D:\\frontend-tasks\\fd-test-job-hooks\\src\\shared\\Application.js";function ie(){return h.a.createElement("article",{id:"main",__source:{fileName:oe,lineNumber:7},__self:this},h.a.createElement(v.Switch,{__source:{fileName:oe,lineNumber:8},__self:this},h.a.createElement(v.Route,{path:"/",component:ne,__source:{fileName:oe,lineNumber:9},__self:this}),h.a.createElement(v.Route,{path:"/:latitude/:longitude",component:ne,__source:{fileName:oe,lineNumber:10},__self:this})))}var ae=r(14),se=r.n(ae),le={username:"",password:"",rememberMe:!1,recovery:!1,locale:"en",loggedIn:!1};var ue={position:B("en"),currentPosition:{isSet:!1,latitude:null,longitude:null},storedPosition:{stored:!1,latitude:null,longitude:null},zoom:9};Object(N.applyMiddleware)(se.a)(N.createStore);var ce=Object(N.combineReducers)({home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return o({},e,{username:t.payload});case C:return o({},e,{password:t.payload});case D:return W(e.username,e.rememberMe),o({},e,{loggedIn:t.payload});case T:return W(e.username,!1),o({},e,{loggedIn:t.payload});case A:return o({},e,{rememberMe:t.payload});case q:case I:return o({},e,{recovery:t.payload});default:return e}},maps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return e;case H:var r=e.storedPosition;return o({},e,{position:r.stored?{latitude:r.latitude,longitude:r.longitude}:t.payload,currentPosition:o({},t.payload),zoom:10});case L:var n=e.storedPosition,i=B(e.locale);return o({},e,{position:n.stored?{latitude:n.latitude,longitude:n.longitude}:i,currentPosition:o({},i,{isSet:!0}),zoom:10});case G:return o({},e,t.payload);default:return e}}}),me={languages:[{name:"English",code:"en"},{name:"German",code:"de"},{name:"Russian",code:"ru"}],translation:{maps:{markerPosition:["You are here.","Du bist hier.","Вы здесь."],markerNearPosition:["You are here... Maybe...","Du bist hier... Vielleicht...","Вы здесь... Возможно..."]},login:{header:["Please, log in","Anmeldung","Авторизация"],email:["E-mail","E-mail","E-mail"],password:["Password","Passwort","Пароль"],rememberMe:["Remember Me","Erinnere dich an mich","Запомнить меня"],signIn:["Sign In","Einloggen","Вход"],signOut:["Sign Out","Ausloggen","Выйти"],forgotPass:["Forgot Password?","Passwort vergessen?","Забыли пароль?"]},recovery:{header:["Password Recovery","Passwort-Wiederherstellung","Восстановление пароля"],sendRequest:["Send Request","Anfrage senden","Отправить запрос"],help:['Enter your email and click "Send Request" button. You will be sent a letter with detailed instructions.','Geben Sie Ihre E-Mail-Adresse ein und klicken Sie auf "Anfrage senden". Sie erhalten einen Brief mit detaillierten Anweisungen.',"Введите адрес электронной почты и нажмите кнопку «Отправить запрос». Вам будет отправлено письмо с подробными инструкциями."]}},options:{}},de="D:\\frontend-tasks\\fd-test-job-hooks\\src\\server\\server.js",fe=l()();fe.use(_()());function _e(e,t){var r=e.get("Accept-Language"),n=r?function(e){if(e){var t=e.split(",")[0];if(/^(ru|en|de)/gi.test(t))return t.split("-")[0].toLowerCase()}else if(window)return/^(ru|de|en)/gi.test(window.navigator.language)?window.navigator.language.split("-")[0].toLowerCase():"en";return"en"}(r.split(",")[0]):"en",i=B(n),a=e.params,s=a.latitude,l=a.longitude,u={latitude:parseFloat(s),longitude:parseFloat(l),stored:!!s&&!!l},c=e.cookies.username,m=void 0===c?"":c,d=!!m,f=o({},me,{options:{defaultLanguage:n,renderToStaticMarkup:g.a.renderToStaticMarkup}}),_=Object(N.createStore)(ce),p=g.a.renderToString(h.a.createElement(y.Provider,{store:_,__source:{fileName:de,lineNumber:90},__self:this},h.a.createElement(E.LocalizeProvider,{initialize:f,store:_,__source:{fileName:de,lineNumber:91},__self:this},h.a.createElement(v.StaticRouter,{location:e.url,context:{},__source:{fileName:de,lineNumber:92},__self:this},h.a.createElement(ie,{__source:{fileName:de,lineNumber:93},__self:this}))))),b=_.getState(),O=b.home,j=b.maps,w=o({},b,{home:o({},O,{locale:n,username:m,rememberMe:d}),maps:o({},j,{position:i,storedPosition:u})});t.send(function(e,t){var r=t.home.locale;return'\n    <!doctype html>\n    <html lang="'.concat(r,'">\n      <head>\n        <title>TheBoats.com test job</title>\n        <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i&subset=cyrillic" rel="stylesheet">\n        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">\n        <link href="/css/style.css" rel="stylesheet">\n      </head>\n      <body>\n        <div id="app">').concat(e,"</div>\n        <script>\n          window.__PRELOADED_STATE__ = ").concat(JSON.stringify(t).replace(/</g,"\\u003c"),'\n        <\/script>\n        <script src="/js/bundle.js"><\/script>\n      </body>\n    </html>\n    ')}(p,w))}fe.use(l.a.json()),fe.use(l.a.urlencoded({extended:!1})),fe.use(c()()),fe.use(d()()),fe.use(l.a.static(a.a.join("./","public"))),process.env.BROWSER=!1,fe.use("/:latitude/:longitude",_e),fe.use("/",_e),fe.listen(3e3)}]);
//# sourceMappingURL=server.js.map