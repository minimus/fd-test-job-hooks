{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"react-localize-redux\"","webpack:///external \"react-redux\"","webpack:///external \"prop-types\"","webpack:///external \"react-router\"","webpack:///external \"redux\"","webpack:///external \"react-router-dom\"","webpack:///external \"express\"","webpack:///external \"react-leaflet-universal\"","webpack:///external \"react-dom/server\"","webpack:///external \"path\"","webpack:///external \"cookie-parser\"","webpack:///external \"compression\"","webpack:///external \"helmet\"","webpack:///external \"redux-thunk\"","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./src/shared/components/maps/BackgroundMap.js","webpack:///./src/shared/redux/actions.js","webpack:///./src/shared/redux/modules/helpers.js","webpack:///./src/shared/containers/maps/MapContainer.js","webpack:///./src/shared/components/home/LabeledInput.js","webpack:///./src/shared/components/home/HomeRecovery.js","webpack:///./src/shared/components/home/HomeLoginRememberControl.js","webpack:///./src/shared/components/home/HomeLoginButtons.js","webpack:///./src/shared/components/home/HomeLogin.js","webpack:///./src/shared/containers/home/HomeContainer.js","webpack:///./src/shared/Application.js","webpack:///./src/shared/redux/modules/home/home.js","webpack:///./src/shared/redux/modules/maps/maps.js","webpack:///./src/shared/redux/index.js","webpack:///./src/shared/localization.js","webpack:///./src/server/server.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_defineProperty","obj","configurable","writable","_objectSpread","target","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","iterator","next","done","push","err","_iterableToArrayLimit","TypeError","_nonIterableRest","BackgroundMap","_ref","position","currentPosition","zoom","viewportChanged","history","latitude","longitude","markLatitude","markLongitude","external_react_default","a","createElement","id","__source","fileName","_jsxFileName","lineNumber","__self","this","external_react_leaflet_universal_","center","maxZoom","attributionControl","doubleClickZoom","scrollWheelZoom","zoomControl","dragging","animate","easeLinearity","style","width","height","onViewportChanged","vp","_vp$center","url","attribution","external_react_localize_redux_","propTypes","objectOf","isRequired","func","withLocalize","withRouter","HOME_USERNAME_CHANGED","HOME_PASSWORD_CHANGED","HOME_SIGN_IN","HOME_SIGN_OUT","HOME_REMEMBER_ME_CHANGED","HOME_PASSWORD_RECOVERY_NEEDED","HOME_PASSWORD_RECOVERY_SENT","MAP_USER_POSITION_CHANGE_STARTED","MAP_USER_POSITION_CHANGE_FINISHED","MAP_USER_POSITION_CHANGE_ERROR","MAP_VIEWPORT_CHANGED","setCookie","username","remember","days","date","Date","setDate","getDate","document","cookie","toUTCString","getDefaultPosition","en","de","ru","mapRef","useRef","mapProps","useSelector","state","maps","shallowEqual","dispatch","useDispatch","useCallback","viewport","_viewport$center","type","payload","useEffect","process","env","BROWSER","setTimeout","options","enableHighAccuracy","timeout","maximumAge","Promise","resolve","reject","window","navigator","geolocation","getCurrentPosition","coords","then","data","_data$coords","isSet","maps_BackgroundMap","LabeledInput","handler","_ref$pass","pass","className","LabeledInput_jsxFileName","onChange","string","bool","defaultProps","home","trackName","event","nickname","passwordRecoverySent","HomeRecovery_jsxFileName","home_LabeledInput","onClick","rememberMe","HomeLoginRememberControl_jsxFileName","htmlFor","checked","loggedIn","passwordRecoveryNeeded","HomeLoginButtons_jsxFileName","password","trackPass","HomeLogin_jsxFileName","home_HomeLoginRememberControl","home_HomeLoginButtons","recovery","HomeContainer_jsxFileName","maps_MapContainer","home_HomeRecovery","home_HomeLogin","dialogContent","Application","Application_jsxFileName","external_react_router_dom_","path","component","Home","initialState","locale","storedPosition","stored","applyMiddleware","thunk","createStore","reducer","combineReducers","action","localesInit","languages","code","translation","markerPosition","markerNearPosition","login","header","email","signIn","signOut","forgotPass","sendRequest","help","app","express","use","helmet","handleRender","req","res","acceptedLanguages","preferredLanguage","pl","split","test","toLowerCase","language","getUserLocale","_req$params","params","parseFloat","_cookies$username","cookies","defaultLanguage","renderToStaticMarkup","ReactDOMServer","store","html","renderToString","external_react_redux_","server_jsxFileName","initialize","location","context","getState","preloadedState","send","JSON","stringify","replace","renderFullPage","json","urlencoded","extended","cookieParser","compression","join","listen"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = require(\"react\");","module.exports = require(\"react-localize-redux\");","module.exports = require(\"react-redux\");","module.exports = require(\"prop-types\");","module.exports = require(\"react-router\");","module.exports = require(\"redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"express\");","module.exports = require(\"react-leaflet-universal\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"path\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"compression\");","module.exports = require(\"helmet\");","module.exports = require(\"redux-thunk\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React from 'react'\nimport propTypes from 'prop-types'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { withRouter } from 'react-router'\nimport {\n  Map as LeafletMap, TileLayer, Marker, Popup,\n} from 'react-leaflet-universal'\n\nconst BackgroundMap = ({\n  position, currentPosition, zoom, viewportChanged, history,\n}) => {\n  const handleViewportChanged = (vp) => {\n    const { center: [latitude, longitude] } = vp\n    if ((currentPosition.latitude && currentPosition.latitude !== latitude)\n      || (currentPosition.longitude && currentPosition.longitude !== longitude)) {\n      history.push(`/${latitude}/${longitude}`)\n    }\n    viewportChanged(vp)\n  }\n\n  const { latitude, longitude } = position\n  const {\n    latitude: markLatitude,\n    longitude: markLongitude,\n  } = currentPosition\n\n  return (\n    <div id=\"maps\">\n      <LeafletMap\n        center={[latitude, longitude]}\n        zoom={zoom}\n        maxZoom={10}\n        attributionControl\n        doubleClickZoom\n        scrollWheelZoom\n        zoomControl={false}\n        dragging\n        animate\n        easeLinearity={0.35}\n        style={{ width: '100%', height: '100%' }}\n        onViewportChanged={handleViewportChanged}\n      >\n        <TileLayer\n          url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        {(markLatitude === null || markLongitude === null) ? false : (\n          <Marker position={[markLatitude, markLongitude]}>\n            <Popup><Translate id=\"maps.markerPosition\" /></Popup>\n          </Marker>\n        )}\n      </LeafletMap>\n    </div>\n  )\n}\n\nBackgroundMap.propTypes = {\n  position: propTypes.objectOf.isRequired,\n  currentPosition: propTypes.objectOf.isRequired,\n  zoom: propTypes.objectOf.isRequired,\n  viewportChanged: propTypes.func.isRequired,\n  history: propTypes.objectOf.isRequired,\n}\n\nexport default withLocalize(withRouter(BackgroundMap))\n","export const HOME_USERNAME_CHANGED = 'HOME_USERNAME_CHANGED'\nexport const HOME_PASSWORD_CHANGED = 'HOME_PASSWORD_CHANGED'\nexport const HOME_SIGN_IN = 'HOME_SIGN_IN'\nexport const HOME_SIGN_OUT = 'HOME_SIGN_OUT'\nexport const HOME_REMEMBER_ME_CHANGED = 'HOME_REMEMBER_ME_CHANGED'\nexport const HOME_PASSWORD_RECOVERY_NEEDED = 'HOME_PASSWORD_RECOVERY_NEEDED'\nexport const HOME_PASSWORD_RECOVERY_SENT = 'HOME_PASSWORD_RECOVERY_SENT'\n\nexport const APPLICATION_GET_USER_PROPERTIES = 'APPLICATION_GET_USER_PROPERTIES'\n\nexport const MAP_USER_POSITION_CHANGE_STARTED = 'MAP_USER_POSITION_CHANGE_STARTED'\nexport const MAP_USER_POSITION_CHANGE_FINISHED = 'MAP_USER_POSITION_CHANGE_FINISHED'\nexport const MAP_USER_POSITION_CHANGE_ERROR = 'MAP_USER_POSITION_CHANGE_ERROR'\n\nexport const MAP_VIEWPORT_CHANGED = 'MAP_VIEWPORT_CHANGED'\n","export function getUserPosition(options) {\n  if (process.env.BROWSER) {\n    return new Promise((resolve, reject) => (\n      window.navigator.geolocation.getCurrentPosition(resolve, reject, options)\n    ))\n  }\n  return { coords: { latitude: null, longitude: null } }\n}\n\nexport function setCookie(username, remember = true) {\n  const days = (!!username && remember) ? 7 : -1\n  const date = new Date()\n  date.setDate(date.getDate() + days)\n  document.cookie = `username=${username}; expires=${date.toUTCString()}`\n}\n\nexport function getCookie() {\n  return document.cookie.replace(/(?:(?:^|.*;\\s*)test2\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\n}\n\nexport function getUserLocale(preferredLanguage) {\n  if (preferredLanguage) {\n    const pl = preferredLanguage.split(',')[0]\n    if (/^(ru|en|de)/gi.test(pl)) {\n      return pl.split('-')[0].toLowerCase()\n    }\n  } else if (!!window) {\n    if (/^(ru|de|en)/gi.test(window.navigator.language)) {\n      return window.navigator.language.split('-')[0].toLowerCase()\n    }\n    return 'en'\n  }\n  return 'en'\n}\n\nexport function getDefaultPosition(locale = 'en') {\n  const defaultPositions = {\n    en: {\n      latitude: 40.730610,\n      longitude: -73.935242,\n    },\n    de: {\n      latitude: 52.520008,\n      longitude: 13.404954,\n    },\n    ru: {\n      latitude: 55.751244,\n      longitude: 37.618423,\n    },\n  }\n  return defaultPositions[locale]\n}\n\nexport function getDefaultStrings(locale) {\n  const defaultStrings = {\n    en: {\n      maps: {\n        markerPosition: 'You are here.',\n        markerNearPosition: 'You are here... Maybe...',\n      },\n      login: {\n        header: 'Please, log in',\n        email: 'E-mail',\n        password: 'Password',\n        rememberMe: 'Remember Me',\n        signIn: 'Sign In',\n        signOut: 'Sign Out',\n        forgotPass: 'Forgot Password?',\n      },\n      recovery: {\n        header: 'Password Recovery',\n        sendRequest: 'Send Request',\n        help: 'Enter your email and click \"Send Request\" button. You will be sent a letter with detailed instructions.',\n      },\n    },\n    de: {\n      maps: {\n        markerPosition: 'Du bist hier.',\n        markerNearPosition: 'Du bist hier... Vielleicht...',\n      },\n      login: {\n        header: 'Anmeldung',\n        email: 'E-mail',\n        password: 'Passwort',\n        rememberMe: 'Erinnere dich an mich',\n        signIn: 'Einloggen',\n        signOut: 'Ausloggen',\n        forgotPass: 'Passwort vergessen?',\n      },\n      recovery: {\n        header: 'Passwort-Wiederherstellung',\n        sendRequest: 'Anfrage senden',\n        help: 'Geben Sie Ihre E-Mail-Adresse ein und klicken Sie auf \"Anfrage senden\". Sie erhalten einen Brief mit detaillierten Anweisungen.',\n      },\n    },\n    ru: {\n      maps: {\n        markerPosition: 'Вы здесь.',\n        markerNearPosition: 'Вы здесь... Возможно...',\n      },\n      login: {\n        header: 'Авторизация',\n        email: 'E-mail',\n        password: 'Пароль',\n        rememberMe: 'Запомнить меня',\n        signIn: 'Вход',\n        signOut: 'Выйти',\n        forgotPass: 'Забыли пароль?',\n      },\n      recovery: {\n        header: 'Восстановление пароля',\n        sendRequest: 'Отправить запрос',\n        help: 'Введите адрес электронной почты и нажмите кнопку «Отправить запрос». Вам будет отправлено письмо с подробными инструкциями.',\n      },\n    },\n  }\n\n  if (/^(en|de|ru)$/.test(locale)) return defaultStrings[locale]\n  return defaultStrings.en\n}\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux'\nimport { withRouter } from 'react-router'\nimport BackgroundMap from '../../components/maps/BackgroundMap'\nimport {\n  MAP_VIEWPORT_CHANGED, MAP_USER_POSITION_CHANGE_STARTED,\n  MAP_USER_POSITION_CHANGE_FINISHED, MAP_USER_POSITION_CHANGE_ERROR,\n} from '../../redux/actions'\nimport { getUserPosition } from '../../redux/modules/helpers'\n\nconst MapContainer = () => {\n  const mapRef = useRef()\n  const mapProps = useSelector(state => state.maps, shallowEqual)\n  const dispatch = useDispatch()\n  const viewportChanged = useCallback(\n    (viewport) => {\n      const { center: [latitude, longitude], zoom } = viewport\n      dispatch({ type: MAP_VIEWPORT_CHANGED, payload: { position: { latitude, longitude }, zoom } })\n    },\n    [dispatch],\n  )\n\n\n  const { position, currentPosition, zoom } = mapProps\n\n  useEffect(() => {\n    const changeUserPosition = () => {\n      if (process.env.BROWSER) {\n        dispatch({\n          type: MAP_USER_POSITION_CHANGE_STARTED,\n          payload: true,\n        })\n\n        setTimeout(() => {\n          getUserPosition({\n            enableHighAccuracy: false,\n            timeout: 5000,\n            maximumAge: 0,\n          })\n            .then((data) => {\n              const { latitude, longitude } = data.coords\n              dispatch({\n                type: MAP_USER_POSITION_CHANGE_FINISHED,\n                payload: {\n                  isSet: true,\n                  latitude,\n                  longitude,\n                },\n              })\n            })\n            .catch((err) => {\n              dispatch({\n                type: MAP_USER_POSITION_CHANGE_ERROR,\n                payload: err,\n              })\n            })\n        }, 1500)\n      }\n    }\n    changeUserPosition()\n  }, [mapRef, dispatch])\n\n  return (\n    <BackgroundMap\n      position={position}\n      currentPosition={currentPosition}\n      zoom={zoom}\n      viewportChanged={viewportChanged}\n    />\n  )\n}\n\nexport default withRouter(MapContainer)\n","import React from 'react'\nimport propTypes from 'prop-types'\nimport { Translate, withLocalize } from 'react-localize-redux'\n\nfunction LabeledInput({\n  id, value, handler, pass = false,\n}) {\n  const type = (pass) ? 'password' : 'text'\n  return (\n    <div className=\"labeled-input\">\n      {(type === 'password') ? <Translate id=\"login.password\" /> : <Translate id=\"login.email\" />}\n      <input id={id} type={type} value={value} onChange={handler} />\n    </div>\n  )\n}\n\nLabeledInput.propTypes = {\n  id: propTypes.string.isRequired,\n  value: propTypes.string.isRequired,\n  handler: propTypes.func.isRequired,\n  pass: propTypes.bool,\n}\n\nLabeledInput.defaultProps = {\n  pass: false,\n}\n\nexport default withLocalize(LabeledInput)\n","import React, { useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport LabeledInput from './LabeledInput'\nimport { HOME_PASSWORD_RECOVERY_SENT, HOME_USERNAME_CHANGED } from '../../redux/actions'\n\nconst HomeRecovery = () => {\n  const username = useSelector(state => state.home.username)\n\n  const dispatch = useDispatch()\n  const trackName = useCallback((event) => {\n    const nickname = event.target.value\n    dispatch({ type: HOME_USERNAME_CHANGED, payload: nickname })\n  }, [dispatch])\n\n  const passwordRecoverySent = useCallback(() => {\n    dispatch({ type: HOME_PASSWORD_RECOVERY_SENT, payload: false })\n  }, [dispatch])\n\n  return (\n    <div id=\"home-component-recovery\">\n      <h1><Translate id=\"recovery.header\" /></h1>\n      <LabeledInput handler={trackName} id=\"username\" value={username} />\n      <p><Translate id=\"recovery.help\" /></p>\n      <div className=\"login-buttons\">\n        <button\n          id=\"send-request\"\n          className=\"sign-in-button\"\n          type=\"button\"\n          onClick={passwordRecoverySent}\n        >\n          <Translate id=\"recovery.sendRequest\" />\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeRecovery)\n","import React, { useCallback } from 'react'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { HOME_REMEMBER_ME_CHANGED } from '../../redux/actions'\n\nconst HomeLoginRememberControl = () => {\n  const rememberMe = useSelector(state => state.home.rememberMe)\n  const dispatch = useDispatch()\n\n  const changeRememberMe = (event) => {\n    dispatch({ type: HOME_REMEMBER_ME_CHANGED, payload: event.target.checked })\n  }\n\n  return (\n    <div>\n      <label id=\"remember-me-label\" htmlFor=\"remember-me\">\n        <input id=\"remember-me\" type=\"checkbox\" checked={rememberMe} onClick={changeRememberMe} />\n        <Translate id=\"login.rememberMe\" />\n      </label>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLoginRememberControl)\n","import React, { useCallback } from 'react'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { HOME_PASSWORD_RECOVERY_NEEDED, HOME_SIGN_IN, HOME_SIGN_OUT } from '../../redux/actions'\n\nconst HomeLoginButtons = () => {\n  const loggedIn = useSelector(state => state.home.loggedIn)\n  const dispatch = useDispatch()\n\n  const passwordRecoveryNeeded = useCallback(() => {\n    dispatch({ type: HOME_PASSWORD_RECOVERY_NEEDED, payload: true })\n  }, [dispatch])\n\n  const signIn = () => {\n    dispatch({ type: HOME_SIGN_IN, payload: true })\n  }\n\n  const signOut = () => {\n    dispatch({ type: HOME_SIGN_OUT, payload: false })\n  }\n\n  return (\n    <div className=\"login-buttons\">\n      <button\n        id=\"sign-in\"\n        className=\"sign-in-button\"\n        type=\"button\"\n        onClick={(loggedIn) ? signOut : signIn}\n      >\n        {(loggedIn) ? <Translate id=\"login.signOut\" /> : <Translate id=\"login.signIn\" />}\n      </button>\n      <button\n        id=\"recovery\"\n        className=\"link-button\"\n        type=\"button\"\n        onClick={passwordRecoveryNeeded}\n      >\n        <Translate id=\"login.forgotPass\" />\n      </button>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLoginButtons)\n","import React, { useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport LabeledInput from './LabeledInput'\nimport RememberControl from './HomeLoginRememberControl'\nimport HomeLoginButtons from './HomeLoginButtons'\nimport { HOME_PASSWORD_CHANGED, HOME_USERNAME_CHANGED } from '../../redux/actions'\n\nconst HomeLogin = () => {\n  const username = useSelector(state => state.home.username)\n  const password = useSelector(state => state.home.password)\n\n  const dispatch = useDispatch()\n\n  const trackName = useCallback((event) => {\n    const nickname = event.target.value\n    dispatch({ type: HOME_USERNAME_CHANGED, payload: nickname })\n  }, [dispatch])\n\n  const trackPass = useCallback((event) => {\n    const pass = event.target.value\n    dispatch({ type: HOME_PASSWORD_CHANGED, payload: pass })\n  }, [dispatch])\n\n  return (\n    <div id=\"home-component-login\">\n      <h1><Translate id=\"login.header\" /></h1>\n      <LabeledInput handler={trackName} id=\"username\" value={username} />\n      <LabeledInput handler={trackPass} id=\"password\" value={password} pass />\n      <RememberControl />\n      <HomeLoginButtons />\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLogin)\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { withRouter } from 'react-router'\nimport Map from '../maps/MapContainer'\nimport Recovery from '../../components/home/HomeRecovery'\nimport Login from '../../components/home/HomeLogin'\n\nconst HomeContainer = () => {\n  const recovery = useSelector(state => state.home.recovery)\n\n  const dialogContent = () => {\n    if (recovery) return <Recovery />\n    return <Login />\n  }\n\n  return (\n    <div id=\"home-container\">\n      <Map />\n      <section id=\"home-component\">\n        {dialogContent()}\n      </section>\n    </div>\n  )\n}\n\nexport default withRouter(HomeContainer)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Home from './containers/home/HomeContainer'\n\nexport default function Application() {\n  return (\n    <article id=\"main\">\n      <Switch>\n        <Route path=\"/\" component={Home} />\n        <Route path=\"/:latitude/:longitude\" component={Home} />\n      </Switch>\n    </article>\n  )\n}\n","import { setCookie } from '../helpers'\n\nimport {\n  HOME_SIGN_OUT, HOME_SIGN_IN, HOME_PASSWORD_RECOVERY_SENT, HOME_PASSWORD_RECOVERY_NEEDED,\n  HOME_REMEMBER_ME_CHANGED, HOME_PASSWORD_CHANGED, HOME_USERNAME_CHANGED,\n} from '../../actions'\n\nconst initialState = {\n  username: '',\n  password: '',\n  rememberMe: false,\n  recovery: false,\n  locale: 'en',\n  loggedIn: false,\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case HOME_USERNAME_CHANGED: {\n      const username = action.payload\n      return { ...state, username }\n    }\n\n    case HOME_PASSWORD_CHANGED:\n      return { ...state, password: action.payload }\n\n    case HOME_SIGN_IN: {\n      const { username, rememberMe } = state\n      setCookie(username, rememberMe)\n      return { ...state, loggedIn: action.payload }\n    }\n\n    case HOME_SIGN_OUT: {\n      const { username } = state\n      setCookie(username, false)\n      return { ...state, loggedIn: action.payload }\n    }\n\n    case HOME_REMEMBER_ME_CHANGED: {\n      const rememberMe = action.payload\n      return { ...state, rememberMe }\n    }\n\n    case HOME_PASSWORD_RECOVERY_NEEDED:\n      return { ...state, recovery: action.payload }\n\n    case HOME_PASSWORD_RECOVERY_SENT:\n      return { ...state, recovery: action.payload }\n\n    default:\n      return state\n  }\n}\n","import { getDefaultPosition } from '../helpers'\nimport {\n  MAP_USER_POSITION_CHANGE_STARTED, MAP_USER_POSITION_CHANGE_FINISHED,\n  MAP_USER_POSITION_CHANGE_ERROR, MAP_VIEWPORT_CHANGED,\n} from '../../actions'\n\nconst initialState = {\n  position: getDefaultPosition('en'),\n  currentPosition: {\n    isSet: false,\n    latitude: null,\n    longitude: null,\n  },\n  storedPosition: {\n    stored: false,\n    latitude: null,\n    longitude: null,\n  },\n  zoom: 9,\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case MAP_USER_POSITION_CHANGE_STARTED:\n      return state\n\n    case MAP_USER_POSITION_CHANGE_FINISHED: {\n      const { storedPosition } = state\n      return {\n        ...state,\n        position: (storedPosition.stored) ? {\n          latitude: storedPosition.latitude,\n          longitude: storedPosition.longitude,\n        } : action.payload,\n        currentPosition: { ...action.payload },\n        zoom: 10,\n      }\n    }\n\n    case MAP_USER_POSITION_CHANGE_ERROR: {\n      const { storedPosition } = state\n      const { locale } = state\n      const position = getDefaultPosition(locale)\n      return {\n        ...state,\n        position: (storedPosition.stored) ? {\n          latitude: storedPosition.latitude,\n          longitude: storedPosition.longitude,\n        } : position,\n        currentPosition: { ...position, isSet: true },\n        zoom: 10,\n      }\n    }\n\n    case MAP_VIEWPORT_CHANGED:\n      return { ...state, ...action.payload }\n\n    default: return state\n  }\n}\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport home from './modules/home'\nimport maps from './modules/maps'\n\nconst createStoreWithMiddleware = applyMiddleware(thunk)(createStore)\n\nexport const reducer = combineReducers({\n  home,\n  maps,\n})\n\nexport default initialState => createStoreWithMiddleware(reducer, initialState)\n","const localesInit = {\n  languages: [\n    { name: 'English', code: 'en' },\n    { name: 'German', code: 'de' },\n    { name: 'Russian', code: 'ru' },\n  ],\n  translation: {\n    maps: {\n      markerPosition: ['You are here.', 'Du bist hier.', 'Вы здесь.'],\n      markerNearPosition: [\n        'You are here... Maybe...',\n        'Du bist hier... Vielleicht...',\n        'Вы здесь... Возможно...',\n      ],\n    },\n    login: {\n      header: ['Please, log in', 'Anmeldung', 'Авторизация'],\n      email: ['E-mail', 'E-mail', 'E-mail'],\n      password: ['Password', 'Passwort', 'Пароль'],\n      rememberMe: ['Remember Me', 'Erinnere dich an mich', 'Запомнить меня'],\n      signIn: ['Sign In', 'Einloggen', 'Вход'],\n      signOut: ['Sign Out', 'Ausloggen', 'Выйти'],\n      forgotPass: ['Forgot Password?', 'Passwort vergessen?', 'Забыли пароль?'],\n    },\n    recovery: {\n      header: ['Password Recovery', 'Passwort-Wiederherstellung', 'Восстановление пароля'],\n      sendRequest: ['Send Request', 'Anfrage senden', 'Отправить запрос'],\n      help: [\n        'Enter your email and click \"Send Request\" button. You will be sent a letter with detailed instructions.',\n        'Geben Sie Ihre E-Mail-Adresse ein und klicken Sie auf \"Anfrage senden\". Sie erhalten einen Brief mit detaillierten Anweisungen.',\n        'Введите адрес электронной почты и нажмите кнопку «Отправить запрос». Вам будет отправлено письмо с подробными инструкциями.',\n      ],\n    },\n  },\n  options: {},\n}\n\nexport default localesInit\n","import path from 'path'\nimport express from 'express'\n\nimport cookieParser from 'cookie-parser'\nimport compression from 'compression'\nimport helmet from 'helmet'\n\nimport React from 'react'\nimport ReactDOMServer from 'react-dom/server'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { LocalizeProvider } from 'react-localize-redux'\nimport { StaticRouter } from 'react-router-dom'\nimport Application from '../shared/Application'\nimport { reducer } from '../shared/redux/index'\nimport { getUserLocale, getDefaultPosition } from '../shared/redux/modules/helpers'\nimport translation from '../shared/localization'\n\nconst app = express()\n\napp.use(helmet())\n\nconst port = 3000\n\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\napp.use(cookieParser())\napp.use(compression())\n\n// Serve static files\napp.use(express.static(path.join('./'/* __dirname */, 'public')))\n\nfunction renderFullPage(html, preloadedState) {\n  const { home: { locale } } = preloadedState\n  return `\n    <!doctype html>\n    <html lang=\"${locale}\">\n      <head>\n        <title>TheBoats.com test job</title>\n        <link href=\"https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i&subset=cyrillic\" rel=\"stylesheet\">\n        <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css\">\n        <link href=\"/css/style.css\" rel=\"stylesheet\">\n      </head>\n      <body>\n        <div id=\"app\">${html}</div>\n        <script>\n          window.__PRELOADED_STATE__ = ${JSON.stringify(preloadedState).replace(\n    /</g,\n    '\\\\u003c',\n  )}\n        </script>\n        <script src=\"/js/bundle.js\"></script>\n      </body>\n    </html>\n    `\n}\n\nprocess.env.BROWSER = false\n\nfunction handleRender(req, res) {\n  // Preferred language\n  const acceptedLanguages = req.get('Accept-Language')\n  const locale = (acceptedLanguages) ? getUserLocale(acceptedLanguages.split(',')[0]) : 'en'\n  const position = getDefaultPosition(locale)\n\n  const { latitude, longitude } = req.params\n  const storedPosition = {\n    latitude: parseFloat(latitude),\n    longitude: parseFloat(longitude),\n    stored: (!!latitude && !!longitude),\n  }\n\n  const { cookies } = req\n  const { username = '' } = cookies\n  const rememberMe = (!!username)\n\n  const localesInit = {\n    ...translation,\n    options: {\n      defaultLanguage: locale,\n      renderToStaticMarkup: ReactDOMServer.renderToStaticMarkup,\n    },\n  }\n\n  const store = createStore(reducer)\n  const context = {}\n\n  // Render the component to a string\n  const html = ReactDOMServer.renderToString(\n    <Provider store={store}>\n      <LocalizeProvider initialize={localesInit} store={store}>\n        <StaticRouter location={req.url} context={context}>\n          <Application />\n        </StaticRouter>\n      </LocalizeProvider>\n    </Provider>,\n  )\n\n  // Grab the initial state from our Redux store\n  const state = store.getState()\n  const { home, maps } = state\n  const preloadedState = {\n    ...state,\n    home: {\n      ...home, locale, username, rememberMe,\n    },\n    maps: {\n      ...maps, position, storedPosition,\n    },\n  }\n\n  // Send the rendered page back to the client\n  res.send(renderFullPage(html, preloadedState))\n}\n\napp.use('/:latitude/:longitude', handleRender)\napp.use('/', handleRender)\n\napp.listen(port)\n"],"sourceRoot":""}