{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"react-localize-redux\"","webpack:///external \"react-redux\"","webpack:///external \"prop-types\"","webpack:///external \"react-router\"","webpack:///external \"redux\"","webpack:///external \"react-router-dom\"","webpack:///external \"express\"","webpack:///external \"react-leaflet-universal\"","webpack:///external \"react-dom/server\"","webpack:///external \"path\"","webpack:///external \"cookie-parser\"","webpack:///external \"compression\"","webpack:///external \"helmet\"","webpack:///external \"redux-thunk\"","webpack:///./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./src/shared/components/maps/BackgroundMap.js","webpack:///./src/shared/redux/actions.js","webpack:///./src/shared/redux/modules/helpers.js","webpack:///./src/shared/containers/maps/MapContainer.js","webpack:///./src/shared/components/home/LabeledInput.js","webpack:///./src/shared/components/home/HomeRecovery.js","webpack:///./src/shared/components/home/HomeLoginRememberControl.js","webpack:///./src/shared/components/home/HomeLoginButtons.js","webpack:///./src/shared/components/home/HomeLogin.js","webpack:///./src/shared/containers/home/HomeContainer.js","webpack:///./src/shared/Application.js","webpack:///./src/shared/redux/modules/home/home.js","webpack:///./src/shared/redux/modules/maps/maps.js","webpack:///./src/shared/redux/index.js","webpack:///./src/shared/localization.js","webpack:///./src/server/server.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_defineProperty","obj","configurable","writable","_slicedToArray","arr","Array","isArray","iterator","toString","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","TypeError","BackgroundMap","position","currentPosition","zoom","viewportChanged","history","latitude","longitude","markLatitude","markLongitude","id","center","maxZoom","attributionControl","doubleClickZoom","scrollWheelZoom","zoomControl","dragging","animate","easeLinearity","style","width","height","onViewportChanged","vp","url","attribution","propTypes","objectOf","isRequired","func","withLocalize","withRouter","HOME_USERNAME_CHANGED","HOME_PASSWORD_CHANGED","HOME_SIGN_IN","HOME_SIGN_OUT","HOME_REMEMBER_ME_CHANGED","HOME_PASSWORD_RECOVERY_NEEDED","HOME_PASSWORD_RECOVERY_SENT","MAP_USER_POSITION_CHANGE_STARTED","MAP_USER_POSITION_CHANGE_FINISHED","MAP_USER_POSITION_CHANGE_ERROR","MAP_VIEWPORT_CHANGED","setCookie","username","remember","days","date","Date","setDate","getDate","document","cookie","toUTCString","getDefaultPosition","en","de","ru","mapRef","useRef","mapProps","useSelector","state","maps","shallowEqual","dispatch","useDispatch","useCallback","viewport","type","payload","useEffect","process","env","BROWSER","setTimeout","options","enableHighAccuracy","timeout","maximumAge","Promise","resolve","reject","window","navigator","geolocation","getCurrentPosition","coords","then","data","isSet","LabeledInput","handler","pass","className","onChange","string","bool","defaultProps","home","trackName","event","nickname","target","passwordRecoverySent","onClick","rememberMe","htmlFor","checked","loggedIn","passwordRecoveryNeeded","password","trackPass","recovery","dialogContent","Application","path","component","Home","initialState","locale","storedPosition","stored","applyMiddleware","thunk","createStore","reducer","combineReducers","action","localesInit","languages","code","translation","markerPosition","markerNearPosition","login","header","email","signIn","signOut","forgotPass","sendRequest","help","app","express","use","helmet","handleRender","req","res","acceptedLanguages","preferredLanguage","pl","split","test","toLowerCase","language","getUserLocale","params","parseFloat","cookies","defaultLanguage","renderToStaticMarkup","ReactDOMServer","store","html","renderToString","initialize","location","context","getState","preloadedState","send","JSON","stringify","replace","renderFullPage","json","urlencoded","extended","cookieParser","compression","join","listen"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = require(\"react\");","module.exports = require(\"react-localize-redux\");","module.exports = require(\"react-redux\");","module.exports = require(\"prop-types\");","module.exports = require(\"react-router\");","module.exports = require(\"redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"express\");","module.exports = require(\"react-leaflet-universal\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"path\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"compression\");","module.exports = require(\"helmet\");","module.exports = require(\"redux-thunk\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import React from 'react'\nimport propTypes from 'prop-types'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { withRouter } from 'react-router'\nimport {\n  Map as LeafletMap, TileLayer, Marker, Popup,\n} from 'react-leaflet-universal'\n\nconst BackgroundMap = ({\n  position, currentPosition, zoom, viewportChanged, history,\n}) => {\n  const handleViewportChanged = (vp) => {\n    const { center: [latitude, longitude] } = vp\n    if ((currentPosition.latitude && currentPosition.latitude !== latitude)\n      || (currentPosition.longitude && currentPosition.longitude !== longitude)) {\n      history.push(`/${latitude}/${longitude}`)\n    }\n    viewportChanged(vp)\n  }\n\n  const { latitude, longitude } = position\n  const {\n    latitude: markLatitude,\n    longitude: markLongitude,\n  } = currentPosition\n\n  return (\n    <div id=\"maps\">\n      <LeafletMap\n        center={[latitude, longitude]}\n        zoom={zoom}\n        maxZoom={10}\n        attributionControl\n        doubleClickZoom\n        scrollWheelZoom\n        zoomControl={false}\n        dragging\n        animate\n        easeLinearity={0.35}\n        style={{ width: '100%', height: '100%' }}\n        onViewportChanged={handleViewportChanged}\n      >\n        <TileLayer\n          url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        {(markLatitude === null || markLongitude === null) ? false : (\n          <Marker position={[markLatitude, markLongitude]}>\n            <Popup><Translate id=\"maps.markerPosition\" /></Popup>\n          </Marker>\n        )}\n      </LeafletMap>\n    </div>\n  )\n}\n\nBackgroundMap.propTypes = {\n  position: propTypes.objectOf.isRequired,\n  currentPosition: propTypes.objectOf.isRequired,\n  zoom: propTypes.objectOf.isRequired,\n  viewportChanged: propTypes.func.isRequired,\n  history: propTypes.objectOf.isRequired,\n}\n\nexport default withLocalize(withRouter(BackgroundMap))\n","export const HOME_USERNAME_CHANGED = 'HOME_USERNAME_CHANGED'\nexport const HOME_PASSWORD_CHANGED = 'HOME_PASSWORD_CHANGED'\nexport const HOME_SIGN_IN = 'HOME_SIGN_IN'\nexport const HOME_SIGN_OUT = 'HOME_SIGN_OUT'\nexport const HOME_REMEMBER_ME_CHANGED = 'HOME_REMEMBER_ME_CHANGED'\nexport const HOME_PASSWORD_RECOVERY_NEEDED = 'HOME_PASSWORD_RECOVERY_NEEDED'\nexport const HOME_PASSWORD_RECOVERY_SENT = 'HOME_PASSWORD_RECOVERY_SENT'\n\nexport const APPLICATION_GET_USER_PROPERTIES = 'APPLICATION_GET_USER_PROPERTIES'\n\nexport const MAP_USER_POSITION_CHANGE_STARTED = 'MAP_USER_POSITION_CHANGE_STARTED'\nexport const MAP_USER_POSITION_CHANGE_FINISHED = 'MAP_USER_POSITION_CHANGE_FINISHED'\nexport const MAP_USER_POSITION_CHANGE_ERROR = 'MAP_USER_POSITION_CHANGE_ERROR'\n\nexport const MAP_VIEWPORT_CHANGED = 'MAP_VIEWPORT_CHANGED'\n","export function getUserPosition(options) {\n  if (process.env.BROWSER) {\n    return new Promise((resolve, reject) => (\n      window.navigator.geolocation.getCurrentPosition(resolve, reject, options)\n    ))\n  }\n  return { coords: { latitude: null, longitude: null } }\n}\n\nexport function setCookie(username, remember = true) {\n  const days = (!!username && remember) ? 7 : -1\n  const date = new Date()\n  date.setDate(date.getDate() + days)\n  document.cookie = `username=${username}; expires=${date.toUTCString()}`\n}\n\nexport function getCookie() {\n  return document.cookie.replace(/(?:(?:^|.*;\\s*)test2\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\n}\n\nexport function getUserLocale(preferredLanguage) {\n  if (preferredLanguage) {\n    const pl = preferredLanguage.split(',')[0]\n    if (/^(ru|en|de)/gi.test(pl)) {\n      return pl.split('-')[0].toLowerCase()\n    }\n  } else if (!!window) {\n    if (/^(ru|de|en)/gi.test(window.navigator.language)) {\n      return window.navigator.language.split('-')[0].toLowerCase()\n    }\n    return 'en'\n  }\n  return 'en'\n}\n\nexport function getDefaultPosition(locale = 'en') {\n  const defaultPositions = {\n    en: {\n      latitude: 40.730610,\n      longitude: -73.935242,\n    },\n    de: {\n      latitude: 52.520008,\n      longitude: 13.404954,\n    },\n    ru: {\n      latitude: 55.751244,\n      longitude: 37.618423,\n    },\n  }\n  return defaultPositions[locale]\n}\n\nexport function getDefaultStrings(locale) {\n  const defaultStrings = {\n    en: {\n      maps: {\n        markerPosition: 'You are here.',\n        markerNearPosition: 'You are here... Maybe...',\n      },\n      login: {\n        header: 'Please, log in',\n        email: 'E-mail',\n        password: 'Password',\n        rememberMe: 'Remember Me',\n        signIn: 'Sign In',\n        signOut: 'Sign Out',\n        forgotPass: 'Forgot Password?',\n      },\n      recovery: {\n        header: 'Password Recovery',\n        sendRequest: 'Send Request',\n        help: 'Enter your email and click \"Send Request\" button. You will be sent a letter with detailed instructions.',\n      },\n    },\n    de: {\n      maps: {\n        markerPosition: 'Du bist hier.',\n        markerNearPosition: 'Du bist hier... Vielleicht...',\n      },\n      login: {\n        header: 'Anmeldung',\n        email: 'E-mail',\n        password: 'Passwort',\n        rememberMe: 'Erinnere dich an mich',\n        signIn: 'Einloggen',\n        signOut: 'Ausloggen',\n        forgotPass: 'Passwort vergessen?',\n      },\n      recovery: {\n        header: 'Passwort-Wiederherstellung',\n        sendRequest: 'Anfrage senden',\n        help: 'Geben Sie Ihre E-Mail-Adresse ein und klicken Sie auf \"Anfrage senden\". Sie erhalten einen Brief mit detaillierten Anweisungen.',\n      },\n    },\n    ru: {\n      maps: {\n        markerPosition: 'Вы здесь.',\n        markerNearPosition: 'Вы здесь... Возможно...',\n      },\n      login: {\n        header: 'Авторизация',\n        email: 'E-mail',\n        password: 'Пароль',\n        rememberMe: 'Запомнить меня',\n        signIn: 'Вход',\n        signOut: 'Выйти',\n        forgotPass: 'Забыли пароль?',\n      },\n      recovery: {\n        header: 'Восстановление пароля',\n        sendRequest: 'Отправить запрос',\n        help: 'Введите адрес электронной почты и нажмите кнопку «Отправить запрос». Вам будет отправлено письмо с подробными инструкциями.',\n      },\n    },\n  }\n\n  if (/^(en|de|ru)$/.test(locale)) return defaultStrings[locale]\n  return defaultStrings.en\n}\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux'\nimport { withRouter } from 'react-router'\nimport BackgroundMap from '../../components/maps/BackgroundMap'\nimport {\n  MAP_VIEWPORT_CHANGED, MAP_USER_POSITION_CHANGE_STARTED,\n  MAP_USER_POSITION_CHANGE_FINISHED, MAP_USER_POSITION_CHANGE_ERROR,\n} from '../../redux/actions'\nimport { getUserPosition } from '../../redux/modules/helpers'\n\nconst MapContainer = () => {\n  const mapRef = useRef()\n  const mapProps = useSelector(state => state.maps, shallowEqual)\n  const dispatch = useDispatch()\n  const viewportChanged = useCallback(\n    (viewport) => {\n      const { center: [latitude, longitude], zoom } = viewport\n      dispatch({ type: MAP_VIEWPORT_CHANGED, payload: { position: { latitude, longitude }, zoom } })\n    },\n    [dispatch],\n  )\n\n\n  const { position, currentPosition, zoom } = mapProps\n\n  useEffect(() => {\n    const changeUserPosition = () => {\n      if (process.env.BROWSER) {\n        dispatch({\n          type: MAP_USER_POSITION_CHANGE_STARTED,\n          payload: true,\n        })\n\n        setTimeout(() => {\n          getUserPosition({\n            enableHighAccuracy: false,\n            timeout: 5000,\n            maximumAge: 0,\n          })\n            .then((data) => {\n              const { latitude, longitude } = data.coords\n              dispatch({\n                type: MAP_USER_POSITION_CHANGE_FINISHED,\n                payload: {\n                  isSet: true,\n                  latitude,\n                  longitude,\n                },\n              })\n            })\n            .catch((err) => {\n              dispatch({\n                type: MAP_USER_POSITION_CHANGE_ERROR,\n                payload: err,\n              })\n            })\n        }, 1500)\n      }\n    }\n    changeUserPosition()\n  }, [mapRef, dispatch])\n\n  return (\n    <BackgroundMap\n      position={position}\n      currentPosition={currentPosition}\n      zoom={zoom}\n      viewportChanged={viewportChanged}\n    />\n  )\n}\n\nexport default withRouter(MapContainer)\n","import React from 'react'\nimport propTypes from 'prop-types'\nimport { Translate, withLocalize } from 'react-localize-redux'\n\nfunction LabeledInput({\n  id, value, handler, pass = false,\n}) {\n  const type = (pass) ? 'password' : 'text'\n  return (\n    <div className=\"labeled-input\">\n      {(type === 'password') ? <Translate id=\"login.password\" /> : <Translate id=\"login.email\" />}\n      <input id={id} type={type} value={value} onChange={handler} />\n    </div>\n  )\n}\n\nLabeledInput.propTypes = {\n  id: propTypes.string.isRequired,\n  value: propTypes.string.isRequired,\n  handler: propTypes.func.isRequired,\n  pass: propTypes.bool,\n}\n\nLabeledInput.defaultProps = {\n  pass: false,\n}\n\nexport default withLocalize(LabeledInput)\n","import React, { useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport LabeledInput from './LabeledInput'\nimport { HOME_PASSWORD_RECOVERY_SENT, HOME_USERNAME_CHANGED } from '../../redux/actions'\n\nconst HomeRecovery = () => {\n  const username = useSelector(state => state.home.username)\n\n  const dispatch = useDispatch()\n  const trackName = useCallback((event) => {\n    const nickname = event.target.value\n    dispatch({ type: HOME_USERNAME_CHANGED, payload: nickname })\n  }, [dispatch])\n\n  const passwordRecoverySent = useCallback(() => {\n    dispatch({ type: HOME_PASSWORD_RECOVERY_SENT, payload: false })\n  }, [dispatch])\n\n  return (\n    <div id=\"home-component-recovery\">\n      <h1><Translate id=\"recovery.header\" /></h1>\n      <LabeledInput handler={trackName} id=\"username\" value={username} />\n      <p><Translate id=\"recovery.help\" /></p>\n      <div className=\"login-buttons\">\n        <button\n          id=\"send-request\"\n          className=\"sign-in-button\"\n          type=\"button\"\n          onClick={passwordRecoverySent}\n        >\n          <Translate id=\"recovery.sendRequest\" />\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeRecovery)\n","import React, { useCallback } from 'react'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { HOME_REMEMBER_ME_CHANGED } from '../../redux/actions'\n\nconst HomeLoginRememberControl = () => {\n  const rememberMe = useSelector(state => state.home.rememberMe)\n  const dispatch = useDispatch()\n\n  const changeRememberMe = (event) => {\n    dispatch({ type: HOME_REMEMBER_ME_CHANGED, payload: event.target.checked })\n  }\n\n  return (\n    <div>\n      <label id=\"remember-me-label\" htmlFor=\"remember-me\">\n        <input id=\"remember-me\" type=\"checkbox\" checked={rememberMe} onClick={changeRememberMe} />\n        <Translate id=\"login.rememberMe\" />\n      </label>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLoginRememberControl)\n","import React, { useCallback } from 'react'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { HOME_PASSWORD_RECOVERY_NEEDED, HOME_SIGN_IN, HOME_SIGN_OUT } from '../../redux/actions'\n\nconst HomeLoginButtons = () => {\n  const loggedIn = useSelector(state => state.home.loggedIn)\n  const dispatch = useDispatch()\n\n  const passwordRecoveryNeeded = useCallback(() => {\n    dispatch({ type: HOME_PASSWORD_RECOVERY_NEEDED, payload: true })\n  }, [dispatch])\n\n  const signIn = () => {\n    dispatch({ type: HOME_SIGN_IN, payload: true })\n  }\n\n  const signOut = () => {\n    dispatch({ type: HOME_SIGN_OUT, payload: false })\n  }\n\n  return (\n    <div className=\"login-buttons\">\n      <button\n        id=\"sign-in\"\n        className=\"sign-in-button\"\n        type=\"button\"\n        onClick={(loggedIn) ? signOut : signIn}\n      >\n        {(loggedIn) ? <Translate id=\"login.signOut\" /> : <Translate id=\"login.signIn\" />}\n      </button>\n      <button\n        id=\"recovery\"\n        className=\"link-button\"\n        type=\"button\"\n        onClick={passwordRecoveryNeeded}\n      >\n        <Translate id=\"login.forgotPass\" />\n      </button>\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLoginButtons)\n","import React, { useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Translate, withLocalize } from 'react-localize-redux'\nimport LabeledInput from './LabeledInput'\nimport RememberControl from './HomeLoginRememberControl'\nimport HomeLoginButtons from './HomeLoginButtons'\nimport { HOME_PASSWORD_CHANGED, HOME_USERNAME_CHANGED } from '../../redux/actions'\n\nconst HomeLogin = () => {\n  const username = useSelector(state => state.home.username)\n  const password = useSelector(state => state.home.password)\n\n  const dispatch = useDispatch()\n\n  const trackName = useCallback((event) => {\n    const nickname = event.target.value\n    dispatch({ type: HOME_USERNAME_CHANGED, payload: nickname })\n  }, [dispatch])\n\n  const trackPass = useCallback((event) => {\n    const pass = event.target.value\n    dispatch({ type: HOME_PASSWORD_CHANGED, payload: pass })\n  }, [dispatch])\n\n  return (\n    <div id=\"home-component-login\">\n      <h1><Translate id=\"login.header\" /></h1>\n      <LabeledInput handler={trackName} id=\"username\" value={username} />\n      <LabeledInput handler={trackPass} id=\"password\" value={password} pass />\n      <RememberControl />\n      <HomeLoginButtons />\n    </div>\n  )\n}\n\nexport default withLocalize(HomeLogin)\n","import React from 'react'\nimport { useSelector } from 'react-redux'\nimport { withRouter } from 'react-router'\nimport Map from '../maps/MapContainer'\nimport Recovery from '../../components/home/HomeRecovery'\nimport Login from '../../components/home/HomeLogin'\n\nconst HomeContainer = () => {\n  const recovery = useSelector(state => state.home.recovery)\n\n  const dialogContent = () => {\n    if (recovery) return <Recovery />\n    return <Login />\n  }\n\n  return (\n    <div id=\"home-container\">\n      <Map />\n      <section id=\"home-component\">\n        {dialogContent()}\n      </section>\n    </div>\n  )\n}\n\nexport default withRouter(HomeContainer)\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom'\nimport Home from './containers/home/HomeContainer'\n\nexport default function Application() {\n  return (\n    <article id=\"main\">\n      <Switch>\n        <Route path=\"/\" component={Home} />\n        <Route path=\"/:latitude/:longitude\" component={Home} />\n      </Switch>\n    </article>\n  )\n}\n","import { setCookie } from '../helpers'\n\nimport {\n  HOME_SIGN_OUT, HOME_SIGN_IN, HOME_PASSWORD_RECOVERY_SENT, HOME_PASSWORD_RECOVERY_NEEDED,\n  HOME_REMEMBER_ME_CHANGED, HOME_PASSWORD_CHANGED, HOME_USERNAME_CHANGED,\n} from '../../actions'\n\nconst initialState = {\n  username: '',\n  password: '',\n  rememberMe: false,\n  recovery: false,\n  locale: 'en',\n  loggedIn: false,\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case HOME_USERNAME_CHANGED: {\n      const username = action.payload\n      return { ...state, username }\n    }\n\n    case HOME_PASSWORD_CHANGED:\n      return { ...state, password: action.payload }\n\n    case HOME_SIGN_IN: {\n      const { username, rememberMe } = state\n      setCookie(username, rememberMe)\n      return { ...state, loggedIn: action.payload }\n    }\n\n    case HOME_SIGN_OUT: {\n      const { username } = state\n      setCookie(username, false)\n      return { ...state, loggedIn: action.payload }\n    }\n\n    case HOME_REMEMBER_ME_CHANGED: {\n      const rememberMe = action.payload\n      return { ...state, rememberMe }\n    }\n\n    case HOME_PASSWORD_RECOVERY_NEEDED:\n      return { ...state, recovery: action.payload }\n\n    case HOME_PASSWORD_RECOVERY_SENT:\n      return { ...state, recovery: action.payload }\n\n    default:\n      return state\n  }\n}\n","import { getDefaultPosition } from '../helpers'\nimport {\n  MAP_USER_POSITION_CHANGE_STARTED, MAP_USER_POSITION_CHANGE_FINISHED,\n  MAP_USER_POSITION_CHANGE_ERROR, MAP_VIEWPORT_CHANGED,\n} from '../../actions'\n\nconst initialState = {\n  position: getDefaultPosition('en'),\n  currentPosition: {\n    isSet: false,\n    latitude: null,\n    longitude: null,\n  },\n  storedPosition: {\n    stored: false,\n    latitude: null,\n    longitude: null,\n  },\n  zoom: 9,\n}\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case MAP_USER_POSITION_CHANGE_STARTED:\n      return state\n\n    case MAP_USER_POSITION_CHANGE_FINISHED: {\n      const { storedPosition } = state\n      return {\n        ...state,\n        position: (storedPosition.stored) ? {\n          latitude: storedPosition.latitude,\n          longitude: storedPosition.longitude,\n        } : action.payload,\n        currentPosition: { ...action.payload },\n        zoom: 10,\n      }\n    }\n\n    case MAP_USER_POSITION_CHANGE_ERROR: {\n      const { storedPosition } = state\n      const { locale } = state\n      const position = getDefaultPosition(locale)\n      return {\n        ...state,\n        position: (storedPosition.stored) ? {\n          latitude: storedPosition.latitude,\n          longitude: storedPosition.longitude,\n        } : position,\n        currentPosition: { ...position, isSet: true },\n        zoom: 10,\n      }\n    }\n\n    case MAP_VIEWPORT_CHANGED:\n      return { ...state, ...action.payload }\n\n    default: return state\n  }\n}\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\nimport home from './modules/home'\nimport maps from './modules/maps'\n\nconst createStoreWithMiddleware = applyMiddleware(thunk)(createStore)\n\nexport const reducer = combineReducers({\n  home,\n  maps,\n})\n\nexport default initialState => createStoreWithMiddleware(reducer, initialState)\n","const localesInit = {\n  languages: [\n    { name: 'English', code: 'en' },\n    { name: 'German', code: 'de' },\n    { name: 'Russian', code: 'ru' },\n  ],\n  translation: {\n    maps: {\n      markerPosition: ['You are here.', 'Du bist hier.', 'Вы здесь.'],\n      markerNearPosition: [\n        'You are here... Maybe...',\n        'Du bist hier... Vielleicht...',\n        'Вы здесь... Возможно...',\n      ],\n    },\n    login: {\n      header: ['Please, log in', 'Anmeldung', 'Авторизация'],\n      email: ['E-mail', 'E-mail', 'E-mail'],\n      password: ['Password', 'Passwort', 'Пароль'],\n      rememberMe: ['Remember Me', 'Erinnere dich an mich', 'Запомнить меня'],\n      signIn: ['Sign In', 'Einloggen', 'Вход'],\n      signOut: ['Sign Out', 'Ausloggen', 'Выйти'],\n      forgotPass: ['Forgot Password?', 'Passwort vergessen?', 'Забыли пароль?'],\n    },\n    recovery: {\n      header: ['Password Recovery', 'Passwort-Wiederherstellung', 'Восстановление пароля'],\n      sendRequest: ['Send Request', 'Anfrage senden', 'Отправить запрос'],\n      help: [\n        'Enter your email and click \"Send Request\" button. You will be sent a letter with detailed instructions.',\n        'Geben Sie Ihre E-Mail-Adresse ein und klicken Sie auf \"Anfrage senden\". Sie erhalten einen Brief mit detaillierten Anweisungen.',\n        'Введите адрес электронной почты и нажмите кнопку «Отправить запрос». Вам будет отправлено письмо с подробными инструкциями.',\n      ],\n    },\n  },\n  options: {},\n}\n\nexport default localesInit\n","import path from 'path'\nimport express from 'express'\n\nimport cookieParser from 'cookie-parser'\nimport compression from 'compression'\nimport helmet from 'helmet'\n\nimport React from 'react'\nimport ReactDOMServer from 'react-dom/server'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { LocalizeProvider } from 'react-localize-redux'\nimport { StaticRouter } from 'react-router-dom'\nimport Application from '../shared/Application'\nimport { reducer } from '../shared/redux/index'\nimport { getUserLocale, getDefaultPosition } from '../shared/redux/modules/helpers'\nimport translation from '../shared/localization'\n\nconst app = express()\n\napp.use(helmet())\n\nconst port = 3000\n\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\napp.use(cookieParser())\napp.use(compression())\n\n// Serve static files\napp.use(express.static(path.join('./'/* __dirname */, 'public')))\n\nfunction renderFullPage(html, preloadedState) {\n  const { home: { locale } } = preloadedState\n  return `\n    <!doctype html>\n    <html lang=\"${locale}\">\n      <head>\n        <title>TheBoats.com test job</title>\n        <link href=\"https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i&subset=cyrillic\" rel=\"stylesheet\">\n        <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css\">\n        <link href=\"/css/style.css\" rel=\"stylesheet\">\n      </head>\n      <body>\n        <div id=\"app\">${html}</div>\n        <script>\n          window.__PRELOADED_STATE__ = ${JSON.stringify(preloadedState).replace(\n    /</g,\n    '\\\\u003c',\n  )}\n        </script>\n        <script src=\"/js/bundle.js\"></script>\n      </body>\n    </html>\n    `\n}\n\nprocess.env.BROWSER = false\n\nfunction handleRender(req, res) {\n  // Preferred language\n  const acceptedLanguages = req.get('Accept-Language')\n  const locale = (acceptedLanguages) ? getUserLocale(acceptedLanguages.split(',')[0]) : 'en'\n  const position = getDefaultPosition(locale)\n\n  const { latitude, longitude } = req.params\n  const storedPosition = {\n    latitude: parseFloat(latitude),\n    longitude: parseFloat(longitude),\n    stored: (!!latitude && !!longitude),\n  }\n\n  const { cookies } = req\n  const { username = '' } = cookies\n  const rememberMe = (!!username)\n\n  const localesInit = {\n    ...translation,\n    options: {\n      defaultLanguage: locale,\n      renderToStaticMarkup: ReactDOMServer.renderToStaticMarkup,\n    },\n  }\n\n  const store = createStore(reducer)\n  const context = {}\n\n  // Render the component to a string\n  const html = ReactDOMServer.renderToString(\n    <Provider store={store}>\n      <LocalizeProvider initialize={localesInit} store={store}>\n        <StaticRouter location={req.url} context={context}>\n          <Application />\n        </StaticRouter>\n      </LocalizeProvider>\n    </Provider>,\n  )\n\n  // Grab the initial state from our Redux store\n  const state = store.getState()\n  const { home, maps } = state\n  const preloadedState = {\n    ...state,\n    home: {\n      ...home, locale, username, rememberMe,\n    },\n    maps: {\n      ...maps, position, storedPosition,\n    },\n  }\n\n  // Send the rendered page back to the client\n  res.send(renderFullPage(html, preloadedState))\n}\n\napp.use('/:latitude/:longitude', handleRender)\napp.use('/', handleRender)\n\napp.listen(port)\n"],"sourceRoot":""}